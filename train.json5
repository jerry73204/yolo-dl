{
    "model": {
        "kind": "NewslabV1",
        "cfg_file": "model-config/tests/cfg/yolov4-csp.json5",
    },
    "dataset": {
        "class_whitelist": ["person", "bicycle", "car", "motorcycle", "bus", "truck"],
        "kind": {
            "type": "Coco",
            "image_size": 256,
            "dataset_dir": "/mnt/external1/aeon/dataset/coco/2017",
            "dataset_name": "train2017",
            "classes_file": "cfg/coco.class",
        },
        // "kind": {
        //     "type": "Csv",
        //     "image_size": 256,
        //     "input_channels": 3,
        //     "image_dir": "/home/jerry73204/csv_dataset/images",
        //     "label_file": "/home/jerry73204/csv_dataset/label.csv",
        //     "classes_file": "/home/jerry73204/csv_dataset/classes.txt",
        // },
        // "kind": {
        //     "type": "Iii",
        //     "image_size": 256,
        //     "dataset_dir": "/home/aeon/dataset/iii-small",
        //     // "dataset_dir": "/home/aeon/dataset/iii-volume-1",
        //     // "dataset_dir": "/mnt/external1/wayside-dataset/資策會資料_vol_1/ntu_delivery",
        //     "classes_file": "cfg/iii.class",
        //     "blacklist_files": [
        //         "171212/FILE171212-172818F/4012.xml",
        //         "171231/FILE171231-072550F/5162.xml",
        //         "171231/FILE171231-080452F/4466.xml",
        //         "171231/FILE171231-080752F/406.xml",
        //         "180102_H/FILE180102-100256F/10266.xml",
        //         "180102_H/FILE180102-100557F/4130.xml",
        //         "180102_H/FILE180102-100557F/8909.xml",
        //         "180102_H/FILE180102-100557F/9145.xml",
        //         "180102_H/FILE180102-100557F/9263.xml",
        //         "180102_H/FILE180102-100857F/2714.xml",
        //         "180102_H/FILE180102-100857F/2773.xml",
        //         "180102_H/FILE180102-100857F/2832.xml",
        //         "180102_H/FILE180102-101157F/1062.xml",
        //         "180102_H/FILE180102-102658F/10030.xml",
        //         "180102_H/FILE180102-103558F/8909.xml",
        //         "180102_H/FILE180102-103558F/8968.xml",
        //         "180102_H/FILE180102-103558F/9027.xml",
        //         "180102_H/FILE180102-104159F/1888.xml",
        //         "180102_H/FILE180102-104159F/236.xml",
        //         "180102_H/FILE180102-111800F/8260.xml",
        //         "180102_H/FILE180102-112401F/7611.xml",
        //         "180102_H/FILE180102-112701F/4307.xml",
        //         "180102_H/FILE180102-112701F/7021.xml",
        //         "180102_H/FILE180102-112701F/7257.xml",
        //         "180102_H/FILE180102-113601F/2714.xml",
        //         "180102_H/FILE180102-115102F/10620.xml",
        //         "180102_H/FILE180102-120002F/6195.xml",
        //         "180102_H/FILE180102-120302F/236.xml",
        //         "180102_H/FILE180102-120302F/295.xml",
        //         "180102_H/FILE180102-120902F/10148.xml",
        //         "180102_H/FILE180102-140908F/6195.xml",
        //         "180102_H/FILE180102-141208F/9263.xml",
        //         "180102_H/FILE180102-141508F/9381.xml",
        //         "180102_H/FILE180102-141808F/4956.xml",
        //         "180102_H/FILE180102-151510F/1475.xml",
        //         "180102_H/FILE180102-151510F/3068.xml",
        //         "180102_H/FILE180102-151510F/3481.xml",
        //         "180102_H/FILE180102-151510F/3540.xml",
        //         "180102_H/FILE180102-151510F/3599.xml",
        //         "180102_H/FILE180102-151510F/3658.xml",
        //         "180102_H/FILE180102-151510F/3717.xml",
        //         "180102_H/FILE180102-151510F/3776.xml",
        //         "180102_H/FILE180102-151510F/3835.xml",
        //         "180102_H/FILE180102-151510F/3894.xml",
        //         "180102_H/FILE180102-151510F/3953.xml",
        //         "180102_H/FILE180102-151510F/8319.xml",
        //         "180104_H/FILE180104-104600F/7375.xml",
        //         "180105/FILE180105-112550F/826.xml",
        //         "180712/R/FILE180712-194723R/4770.xml",
        //         "180814/F/FILE180814-191513F/10384.xml",
        //         "cab-181012/FILE181013-032329F/1305.xml",
        //         "cab-181012/FILE181013-034430F/4350.xml",
        //     ]
        // },
    },
    "logging": {
        "dir": "logs-coco",
        "enable_images": false,
        "enable_debug_stat": false,
        "enable_inference": true,
    },
    "preprocessor": {
        // "worker_buf_size": 36,
        "unordered_records": true,
        "unordered_batches": true,
        "cache_dir": "/home/aeon/yolo-dl-cache",
        "device": "cuda(0)",
        "mixup_prob": 0.0,
        "cutmix_prob": 0.0,
        "mosaic_prob": 0.3,
        "mosaic_margin": 0.4,
        "affine_prob": 0.5,
        "rotate_prob": 0.5,
        "rotate_degrees": 10,
        "translation_prob": 0.5,
        "translation": 0.1,
        "scale_prob": 0.5,
        "scale": [0.9, 1.1],
        "horizontal_flip_prob": 0.5,
        "vertical_flip_prob": 0.0,

        "color_jitter_prob": 0.5,
        "hue_shift": 0.01,
        "saturation_shift": 0.1,
        "value_shift": 0.1,

        "bbox_scaling": 1.0,
        "out_of_bound_tolerance": 10,
        "min_bbox_size": 0.005,
    },
    "training": {
        // "batch_size": 4,
        "batch_size": 30,
        "device_config": {
            "type": "SingleDevice",
            "device": "cuda(0)"

            // "type": "MultiDevice",
            // "minibatch_size": 4,
            // "devices": ["cuda(1)", "cuda(2)", "cuda(3)"],
        },
        // "override_initial_step": 0,
        "momentum": 0.937,
        "weight_decay": 0.0005,
        "lr_schedule": {
            "type": "StepWise",

            // "steps": [
            //     [0, 0.01],
            // ],

            // "steps": [
            //     [0, 0.001],
            // ],

            "steps": [
                [0, 0.01],
                [1200, 0.001],
                [100000, 0.0001],
                [120000, 0.00001],
                // [450000, 0.00001],
            ],
        },
        "loss": {
            "match_grid_method": "Rect4", // Rect2, Rect4
            "box_metric": "Hausdorff",    // IoU, GIoU, DIoU, CIoU, Hausdorff
            "objectness_loss_kind": "Bce",
            "classification_loss_kind": "Bce",

            // for DIoU
            // "iou_loss_weight": 0.31,
            // "objectness_loss_weight": 1.0,
            // "classification_loss_weight": 0.87,

            // for Hausdorff
            "iou_loss_weight": 0.140,
            "objectness_loss_weight": 0.268,
            "classification_loss_weight": 1.0,
        },
        "save_checkpoint_steps": 1000,
        "load_checkpoint": {
            // "type": "Disabled",
            "type": "FromRecent",
            // "type": "FromFile",
            // "file": "logs-coco/2021-01-29-05-00-26.463+0800/checkpoints/2021-01-29-05-06-38.722+0800_001000_00.42787.ckpt",
        },
    },
}
